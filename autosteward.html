<head>
  <title>AutoSteward</title>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400,300,600,700' rel='stylesheet' type='text/css'>
</head>

<body>
  <h1>Schedule</h1>

  <div class="container">
    <div class="row vertical-align">
      <div class="col-md-1 pager">
        &#x25C0;
      </div>
      <div class="col-md-5">
        <h2>Week of <span>{{week.format "MMMM D"}}</span></h2>
        <div class="panel panel-default">
          <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th></th>
                    <th>Waiter 1</th>
                    <th>Waiter 2</th>
                    <th>Waiter 3</th>
                </tr>
            </thead>
            <tbody>
                {{#each daysOfCurrentWeek}}
                  {{> dayRow}}
                {{/each}}
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-md-5">
        <h2>Week of <span>November 17</span></h2>
          <div class="panel panel-default">
            <table class="table table-striped table-bordered">
              <thead>
                  <tr>
                      <th></th>
                      <th>Waiter 1</th>
                      <th>Waiter 2</th>
                      <th>Waiter 3</th>
                  </tr>
              </thead>
              <tbody>
                  <tr>
                      <td>Mon</td>
                      <td>Adler</td>
                      <td>Somers</td>
                      <td>Solomon</td>
                  </tr>
                  <tr>
                      <td>Tues</td>
                      <td>Adler</td>
                      <td>Somers</td>
                      <td>Solomon</td>
                  </tr>
                  <tr>
                      <td>Wed</td>
                      <td>Adler</td>
                      <td>Somers</td>
                      <td>Solomon</td>
                  </tr>
                  <tr>
                      <td>Thu</td>
                      <td>Adler</td>
                      <td>Somers</td>
                      <td>Solomon</td>
                  </tr>
                  <tr>
                      <td>Sat</td>
                      <td></td>
                      <td></td>
                      <td>Solomon</td>
                  </tr>
                  <tr>
                      <td>Sun</td>
                      <td></td>
                      <td></td>
                      <td>Solomon</td>
                  </tr>
              </tbody>
            </table>
          </div>
      </div>
      <div class="col-md-1 pager">
          &#x25B6;
      </div>
    </div>
  </div>

  <h1>Roster</h1>
  <div class="container">
    <div class="row vertical-align">
      <table class="table table-bordered table-striped">
      <tbody>
        {{#each brothers}}
          {{> slab}}
        {{/each}}
      </tbody>
      </table>
    </div>
  </div>

  <div class="footer">
    <span>&copy; 2014 AEPi Alpha Kappa</span>
  </div>

</body>

<template name="dayRow">
  <tr>
    <td>{{formatDate this "dddd"}}</td>
      <td>
        {{#with waiterWithNumberForCurrentDay 1}}
          {{brother.first_name}} {{brother.last_name}}
        {{/with}}
      </td>
      <td>
        {{#with waiterWithNumberForCurrentDay 2}}
          {{brother.first_name}} {{brother.last_name}}
        {{/with}}
      </td>
      <td>
        {{#with waiterWithNumberForCurrentDay 3}}
          {{brother.first_name}} {{brother.last_name}}
        {{/with}}
      </td>
  </tr>
</template>

<template name="slab">
  <tr>
    <td>{{first_name}} {{last_name}} ({{dutiesForCurrentBrother.count}})</td>

    <td>
      {{#each shifts}}
        {{#if currentBrotherHasShift}}
          <button class="remove btn btn-small btn-success">{{day_name}} #{{waiter_number}}</button>
        {{else}}
          <button class="add btn btn-small btn-danger">{{day_name}} #{{waiter_number}}</button>
        {{/if}}
      {{/each}}
    </td>

    {{>phone}}
  </tr>
</template>

<template name="phone">
  {{#if phone_number}}
  <td class="phone-cell">
    <a href="tel://{{phone_number}}">
      <span class="glyphicon glyphicon-phone" data-toggle="tooltip" data-placement="top" title="{{phone_number}}"></span>
    </a>
  </td>
  {{else}}
  <td class="phone-cell phone-cell-problem">
    <a class="add-phone" href="#">
      <span class="glyphicon glyphicon-phone" data-toggle="tooltip" data-placement="top" title="No phone number"></span>
    </a>
  </td>
  {{/if}}
</template>